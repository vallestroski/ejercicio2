<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Ejercicio 8 - Votaciones en gráfico</title>
    <link rel="stylesheet" href="chart.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  </head>

  <body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <div class="contenedor">
      <h1>Votaciones</h1>

    
      
      
      <!-- *** -->
      <div class="container ">
        <div class="btn-group-custom">
        <button type="button" class="btn btn-outline-primary" onclick="vote(0)">Socialistas</button>
        <button type="button" class="btn btn-outline-primary" onclick="vote(1)">Liberales</button>
        <button type="button" class="btn btn-outline-primary" onclick="vote(2)">Animalistas</button>
      </div>
      <div class="btn-group-custom">
        <button type="button" class="btn btn-outline-primary" onclick="vote(3)">Centristas</button>
        <button type="button" class="btn btn-outline-primary" onclick="vote(4)">Ecologistas</button>
        <button type="button" class="btn btn-outline-danger" onclick="reset()">Reset</button>
      </div>
      </div>
      <!-- *** -->
      

      <div class="container ">Gráfico Resultado Votación
        <div class="canvas">
          <canvas id="myChart" ></canvas>
        </div>
<script>
  const data = {
  labels: [
    'Socialistas',
    'Liberales',
    'Animalistas',
    'Centristas',
    'Ecologistas'
  ],
  datasets: [{
    label: 'votos',
    data: [300, 50, 100,20,33],
    backgroundColor: [
      'rgb(255, 99, 132)',
      'rgb(54, 162, 235)',
      'rgb(255, 205, 86)',
      'rgb(168, 51, 255)',
      'rgb(110, 255, 51)'
    ],
    hoverOffset: 5
  }]
};

          const config = {
  type: 'pie',
  data: data,
};

          const myChart = new Chart(document.getElementById('myChart'),config);

      function vote(partido) {
        
          myChart.data.datasets.forEach((dataset) => {
              dataset.data[partido]+=1;
              console.log(dataset.data[partido]);
          });
          myChart.update();
}


    function reset() {
      
      myChart.data.datasets.forEach((dataset) => {
      dataset.data=[0,0,0,0,0];
    });
    myChart.update();
}
 

</script>
      </div>
    </div>

    <div class="container">
      <div class="d-flex justify-content-end my-3">
        <a href="../index.html" class="btn btn-outline-dark">Volver</a>
      </div>
    </div>
  </body>
</html>
